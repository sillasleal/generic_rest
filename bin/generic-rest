#!/usr/bin/env node

const { startServer } = require('../src/server');

// Parse command line arguments
const args = process.argv.slice(2);
let port = 3000;
let dbPath = null;

// Parse arguments
for (let i = 0; i < args.length; i++) {
  const arg = args[i];
  
  if (arg === '--port' || arg === '-p') {
    port = parseInt(args[i + 1]) || 3000;
    i++; // Skip next argument
  } else if (arg === '--db-path' || arg === '--db') {
    dbPath = args[i + 1];
    i++; // Skip next argument
  } else if (arg === '--help' || arg === '-h') {
    console.log(`
Generic REST API CLI

Usage: generic-rest [options]

Options:
  -p, --port <port>      Port to run the server (default: 3000)
  --db-path, --db <path> Database path (default: ./db)
  -h, --help            Show this help message

Examples:
  generic-rest
  generic-rest --port 8080
  generic-rest --db-path ./data
  generic-rest -p 8080 --db ./my-data
`);
    process.exit(0);
  }
}

// Start the server
startServer({ port, dbPath });
